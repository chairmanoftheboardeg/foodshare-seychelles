<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>FoodShare Seychelles - Reduce Food Waste, End Food Insecurity</title>
    <meta name="description" content="FoodShare Seychelles connects donors with recipients to reduce food waste and combat food insecurity across the Seychelles islands.">
    <meta property="og:title" content="FoodShare Seychelles">
    <meta property="og:image" content="/image/logo.png">
    <link rel="icon" type="image/png" href="/image/logo.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <style>
        /* 9.1 Brand & Theme Variables */
        :root {
            --fs-green-primary: #4CAF50;    /* Primary Green */
            --fs-green-dark: #388E3C;       /* Headers, highlights */
            --fs-green-light: #81C784;      /* Accents */
            --fs-blue-cta: #2196F3;         /* Blue for CTAs */
            --fs-orange-warning: #FF9800;   /* Warnings, pending */
            --fs-red-danger: #D32F2F;       /* Danger, destructive actions */
            --fs-text-primary: #333;
            --fs-bg-light: #f9f9f9;
            --fs-bg-white: #fff;
            --fs-radius: 18px; 
            --fs-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        /* Global Resets and Typography */
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: Arial, sans-serif; line-height: 1.6; }
        body { color: var(--fs-text-primary); background-color: var(--fs-bg-light); min-height: 100vh; display: flex; flex-direction: column; }
        main { flex-grow: 1; }

        /* Containers and Layout */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 15px; }
        .section-padding { padding: 60px 0; }

        /* UI Components: Cards, Buttons */
        .card { background-color: var(--fs-bg-white); border-radius: var(--fs-radius); box-shadow: var(--fs-shadow); padding: 25px; overflow: hidden; transition: transform 0.3s ease; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); }
        .card-top-gradient { height: 8px; background: linear-gradient(90deg, var(--fs-green-primary), var(--fs-green-light)); margin: -25px -25px 20px -25px; }
        .btn { display: inline-block; padding: 12px 25px; border-radius: 8px; font-weight: bold; text-align: center; text-decoration: none; cursor: pointer; transition: background-color 0.3s, transform 0.1s; border: none; }
        .btn-primary { background-color: var(--fs-green-primary); color: white; }
        .btn-primary:hover { background-color: var(--fs-green-dark); }
        .btn-cta { background-color: var(--fs-blue-cta); color: white; font-size: 1.1em; padding: 15px 30px; }
        .btn-cta:hover { background-color: #1a7fc5; }
        .btn-secondary { background-color: transparent; color: var(--fs-green-primary); border: 2px solid var(--fs-green-primary); }
        .btn-secondary:hover { background-color: var(--fs-green-light); color: white; }
        .linkedin-link { color: #0077B5; margin-left: 10px; }

        /* Typography */
        h1, h2, h3 { margin-bottom: 0.5em; color: var(--fs-green-dark); line-height: 1.2; }
        .grid-3-col { display: grid; grid-template-columns: 1fr; gap: 30px; }
        
        /* Navigation Bar */
        .navbar { background-color: var(--fs-bg-white); box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); padding: 15px 0; position: sticky; top: 0; z-index: 1000; }
        .navbar-content { display: flex; justify-content: space-between; align-items: center; }
        .logo img { height: 40px; margin-right: 10px; }
        .nav-links { display: none; }
        .nav-links a { text-decoration: none; color: var(--fs-text-primary); margin-left: 20px; font-weight: 500; transition: color 0.2s; }
        .nav-links a:hover { color: var(--fs-green-primary); }
        .hamburger { display: block; font-size: 24px; cursor: pointer; color: var(--fs-green-dark); }
        .nav-links.active { display: flex; flex-direction: column; position: absolute; top: 70px; left: 0; width: 100%; background-color: var(--fs-bg-white); box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1); padding: 15px 0; }
        .nav-links.active a { margin: 10px 15px; padding: 8px 0; border-bottom: 1px solid #eee; }
        .nav-staff-login { margin-left: 20px; color: var(--fs-blue-cta); font-weight: 500; text-decoration: none; }
        
        /* Footer */
        .footer { background-color: var(--fs-green-dark); color: white; padding: 40px 0 20px 0; margin-top: auto; }
        .footer-content { display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px; padding-bottom: 20px; border-bottom: 1px solid rgba(255, 255, 255, 0.2); }
        .footer-links h4 { color: var(--fs-green-light); margin-bottom: 15px; }
        .footer-links ul { list-style: none; }
        .footer-links a { color: white; text-decoration: none; display: block; margin-bottom: 8px; transition: color 0.2s; }
        .footer-links a:hover { color: var(--fs-green-light); }
        .footer-logo img { height: 50px; filter: brightness(0) invert(1); }
        .footer-copy { text-align: center; padding-top: 15px; font-size: 0.9em; }

        /* Loading Overlay */
        #loading-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(255, 255, 255, 0.98); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 3000; transition: opacity 0.5s ease; }
        .spinner { border: 8px solid #f3f3f3; border-top: 8px solid var(--fs-green-primary); border-radius: 50%; width: 60px; height: 60px; animation: spin 1.5s linear infinite; margin-bottom: 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .loading-message { max-width: 400px; text-align: center; padding: 20px; border: 1px dashed var(--fs-orange-warning); color: var(--fs-text-primary); background-color: #fff8e1; border-radius: 10px; }

        /* Cookie/Login Gate Overlay (New Requirement) */
        #cookie-gate {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85); /* Dark, opaque background */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        .cookie-content {
            background-color: var(--fs-bg-white);
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            text-align: center;
            box-shadow: var(--fs-shadow-deep);
            animation: fadeIn 0.5s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Media Queries */
        @media (min-width: 768px) {
            .grid-3-col { grid-template-columns: repeat(3, 1fr); }
            .nav-links { display: flex; flex-grow: 1; justify-content: flex-end; align-items: center; }
            .hamburger { display: none; }
            .footer-content { grid-template-columns: repeat(5, 1fr); } /* Adjusted for 5 columns */
            .footer-logo { grid-column: span 1; }
        }
    </style>
</head>
<body>
    
    <div id="cookie-gate">
        <div class="cookie-content">
            <h2 style="color: var(--fs-blue-cta);"><i class="fas fa-cookie-bite"></i> Welcome to FoodShare Seychelles</h2>
            <p style="margin: 20px 0;">We use cookies and similar technologies to improve your experience and track our vital impact statistics. **By continuing, you agree to our <a href="/policies/privacy-policy/" style="color: var(--fs-blue-cta);">Privacy Policy</a>.**</p>
            <hr style="border-color: #eee; margin: 20px 0;">
            <p style="font-size: 1.1em; font-weight: 600; color: var(--fs-green-dark); margin-bottom: 20px;">
                To utilize our full range of services (Donate, Claim Food, Volunteer), you must sign up or log in.
            </p>
            <div style="display: flex; justify-content: center; gap: 15px;">
                <a href="/account/signup/" class="btn btn-cta" id="cookie-accept-btn"><i class="fas fa-user-plus"></i> Sign Up / Log In</a>
                <button class="btn btn-secondary" onclick="hideCookieGate()">I Understand / Continue Browsing</button>
            </div>
        </div>
    </div>

    <div id="loading-overlay">
        <div class="spinner"></div>
        <div class="loading-message">
            <h3 style="color: var(--fs-orange-warning); margin-bottom: 10px;">⚠️ Transitioning to V1.1</h3>
            <p>This website is currently **under development** to switch from **version 1.0 to version 1.1**.</p>
            <p>Please expect **bugs and glitches** as we integrate new features. The time is: **<span id="current-timestamp"></span>**.</p>
            <p style="margin-top: 10px;">Thank you for your attention to this matter.</p>
        </div>
    </div>

    <nav class="navbar">
        <div class="container navbar-content">
            <div class="logo">
                <a href="/">
                    <img src="/image/logo.png" alt="FoodShare Seychelles Logo">
                    <span style="font-size: 1.5em; font-weight: 700; color: var(--fs-green-dark);">FoodShare</span>
                </a>
            </div>
            
            <div class="nav-auth-group">
                <div class="nav-links" id="nav-links">
                    <a href="/available-food/">Find Food</a>
                    <a href="/how-it-works/">How It Works</a>
                    <a href="/impact/">Impact</a>
                    <a href="/news-updates/">News</a>
                    <a href="/about-us/">About Us</a>
                    <a href="/contact-us/">Contact</a>
                    
                    <a href="/account/dashboard/" id="nav-dashboard-link" style="display: none;"><i class="fas fa-tachometer-alt"></i> Dashboard</a>

                    <a href="/donate-now/" class="btn btn-cta">Donate Now</a>
                </div>
                
                <a href="/staff-login/" class="nav-staff-login">Staff Login</a>
            </div>

            <i class="fa-solid fa-bars hamburger" id="hamburger"></i>
        </div>
    </nav>

    <main>
        <header class="hero section-padding" style="background-color: var(--fs-bg-white);">
            <div class="container" style="display: flex; flex-direction: column; gap: 30px;">
                <h1 style="font-size: 2.5em; color: var(--fs-green-dark); text-align: center;">Reducing Waste, Building Community in Seychelles.</h1>
                <p style="text-align: center; font-size: 1.2em; max-width: 800px; margin: 0 auto;">Our web platform coordinates the efficient transfer of surplus food, fighting hunger and promoting sustainability across the islands. 
                    <a href="https://www.linkedin.com/company/foodshare-seychelles" target="_blank" class="linkedin-link">
                        <i class="fab fa-linkedin"></i> Follow our mission on LinkedIn.
                    </a>
                </p>
                
                <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
                    <a href="/donate-now/" class="btn btn-cta"><i class="fas fa-hand-holding-heart"></i> Donate Food Today</a>
                    <a href="/available-food/" class="btn btn-secondary"><i class="fas fa-search"></i> Find Available Food</a>
                </div>

                <div class="card" style="margin-top: 30px; border: 2px solid var(--fs-green-light);">
                    <div class="card-top-gradient" style="margin-top: -25px; margin-bottom: 15px;"></div>
                    <h3 style="color: var(--fs-orange-warning);"><i class="fas fa-bullhorn"></i> Latest Update</h3>
                    <p id="announcement-text">Loading latest updates...</p>
                    <p style="font-size: 0.85em; text-align: right; color: #777; margin-top: 10px;"><a href="/news-updates/" style="color: var(--fs-blue-cta);">View all News & Updates <i class="fas fa-arrow-right"></i></a></p>
                </div>
            </div>
        </header>

        <section class="section-padding">
            <div class="container">
                <h2 style="text-align: center; margin-bottom: 40px;">Get Involved in 3 Simple Steps</h2>
                <div class="grid-3-col">
                    <div class="card">
                        <div class="card-top-gradient"></div>
                        <h3 style="color: var(--fs-green-primary);"><i class="fas fa-box"></i> 1. List Surplus Food</h3>
                        <p>Businesses, hotels, and individuals list their food via our easy, mobile-friendly donation form.</p>
                        <a href="/donate-now/" class="btn btn-primary" style="margin-top: 15px;">List Food Now</a>
                    </div>
                    <div class="card">
                        <div class="card-top-gradient" style="background: linear-gradient(90deg, var(--fs-blue-cta), #64b5f6);"></div>
                        <h3 style="color: var(--fs-blue-cta);"><i class="fas fa-hand-holding"></i> 2. Claim & Fulfill</h3>
                        <p>Registered community members claim listings, handled by our volunteer logistics team for delivery or pickup.</p>
                        <a href="/available-food/" class="btn btn-primary" style="margin-top: 15px;">View Listings</a>
                    </div>
                    <div class="card">
                        <div class="card-top-gradient" style="background: linear-gradient(90deg, var(--fs-orange-warning), #ffcc80);"></div>
                        <h3 style="color: var(--fs-orange-warning);"><i class="fas fa-chart-line"></i> 3. Track Our Impact</h3>
                        <p>Every donation is tracked, allowing us to report on meals provided and carbon emissions offset.</p>
                        <a href="/impact/" class="btn btn-primary" style="margin-top: 15px;">See Impact</a>
                    </div>
                </div>
                <p style="text-align: center; margin-top: 30px;"><a href="/how-it-works/" style="color: var(--fs-green-dark); font-weight: 600;">View the full Step-by-Step Explanation <i class="fas fa-long-arrow-alt-right"></i></a></p>
            </div>
        </section>
        
        <section class="section-padding" style="background-color: var(--fs-bg-white);">
            <div class="container">
                <h2 style="text-align: center; margin-bottom: 40px;">Voices from Our Community</h2>
                <div class="grid-3-col" id="testimonials-preview">
                    <div class="card" style="text-align: center; background-color: #f1f8e9;"><p>Loading feedback...</p></div>
                    <div class="card" style="text-align: center; background-color: #f1f8e9;"><p>Loading feedback...</p></div>
                    <div class="card" style="text-align: center; background-color: #f1f8e9;"><p>Loading feedback...</p></div>
                </div>
                <div style="text-align: center; margin-top: 30px;">
                    <a href="/about-us/testimonials/" class="btn btn-secondary">Read More Testimonials <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
        </section>

    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="/image/logo.png" alt="FoodShare Seychelles Logo">
                    <p style="margin-top: 10px; font-size: 0.9em;">A non-profit initiative dedicated to sustainability and community welfare.</p>
                    <div style="margin-top: 15px;">
                        <a href="https://www.linkedin.com/company/foodshare-seychelles" target="_blank" style="margin-right: 15px; color: #0077B5; background-color: white; padding: 5px 8px; border-radius: 4px;"><i class="fab fa-linkedin fa-lg"></i></a>
                        <a href="/social/" style="color: white;"><i class="fab fa-facebook-square fa-lg"></i></a>
                    </div>
                </div>
                <div class="footer-links">
                    <h4>About Us</h4>
                    <ul>
                        <li><a href="/about-us/mission-vision/">Mission & Vision</a></li>
                        <li><a href="/about-us/history-story/">History & Story</a></li>
                        <li><a href="/about-us/meet-our-team/">Meet Our Team</a></li>
                        <li><a href="/about-us/partners-supporters/">Partners & Supporters</a></li>
                        <li><a href="/about-us/testimonials/">Testimonials</a></li>
                    </ul>
                </div>
                <div class="footer-links">
                    <h4>Get Involved</h4>
                    <ul>
                        <li><a href="/donate-now/">Donate Food</a></li>
                        <li><a href="/available-food/">Find Food</a></li>
                        <li><a href="/volunteer-now/">Volunteer Now</a></li>
                        <li><a href="/how-it-works/volunteer-involvement/">Volunteer Roles</a></li>
                    </ul>
                </div>
                <div class="footer-links">
                    <h4>Information</h4>
                    <ul>
                        <li><a href="/impact/">Impact Dashboard</a></li>
                        <li><a href="/news-updates/">News & Updates</a></li>
                        <li><a href="/contact-us/">Contact Us</a></li>
                        <li><a href="/contact-us/faq/">FAQ</a></li>
                        <li><a href="/staff-login/">Staff Login</a></li>
                    </ul>
                </div>
                <div class="footer-links">
                    <h4>Legal & Safety</h4>
                    <ul>
                        <li><a href="/policies/privacy-policy/">Privacy Policy</a></li>
                        <li><a href="/policies/terms-of-use/">Terms of Use</a></li>
                        <li><a href="/policies/food-safety-guidelines/">Food Safety Guidelines</a></li>
                        <li><a href="/policies/donation-refund-policy/">Donation & Refund Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-copy">
                &copy; <span id="current-year"></span> FoodShare Seychelles. All rights reserved. | <a href="/sitemap/" style="color: rgba(255, 255, 255, 0.7);">Sitemap</a>
            </div>
        </div>
    </footer>

    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script>
        // Initialize Supabase Client (REPLACE WITH YOUR KEYS)
        const SUPABASE_URL = 'YOUR_SUPABASE_URL'; 
        const SUPABASE_ANON_KEY = 'YOUR_SUPABASE_ANON_KEY';
        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // Utility: Loading Overlay
        function hideLoadingOverlay() {
            const overlay = document.getElementById('loading-overlay');
            if (overlay) {
                overlay.style.opacity = '0';
                setTimeout(() => { overlay.style.display = 'none'; }, 500);
            }
        }
        
        // Utility: Cookie/Login Gate (New Requirement)
        function hideCookieGate() {
            document.getElementById('cookie-gate').style.display = 'none';
            localStorage.setItem('fs_v11_visited', 'true');
        }

        // Feature: Load Data (Announcement and Testimonials)
        async function loadPublicData() {
            try {
                // 1. Load Announcement
                let { data: settingsData } = await supabase
                    .from('settings')
                    .select('announcement, is_announcement_active')
                    .limit(1)
                    .single();

                if (settingsData && settingsData.is_announcement_active) {
                    document.getElementById('announcement-text').innerText = settingsData.announcement;
                } else {
                    document.getElementById('announcement-text').innerText = "No active announcements at this time. Check our News page for updates!";
                }
                
                // 2. Load Testimonials
                let { data: testimonialsData } = await supabase
                    .from('testimonials')
                    .select('full_name, body, relationship')
                    .eq('is_approved', true) // Only show approved ones
                    .limit(3); 
                
                const testimonialContainer = document.getElementById('testimonials-preview');
                testimonialContainer.innerHTML = ''; // Clear loading message

                if (testimonialsData && testimonialsData.length > 0) {
                    testimonialsData.forEach(t => {
                        testimonialContainer.innerHTML += `
                            <div class="card" style="background-color: #f1f8e9;">
                                <p style="font-style: italic;">"${t.body}"</p>
                                <p style="font-weight: 600; margin-top: 10px;">- ${t.full_name}</p>
                                <p style="font-size: 0.8em; color: #777;">${t.relationship || 'Community Member'}</p>
                            </div>
                        `;
                    });
                } else {
                     testimonialContainer.innerHTML = `<div class="card" style="grid-column: 1 / -1; text-align: center;"><p>Be the first to leave a testimonial! Use our contact form to submit feedback.</p></div>`;
                }

            } catch (err) {
                console.error('Error loading public data:', err);
            } finally {
                // Hide the loading screen after data is fetched or fails
                hideLoadingOverlay();
            }
        }
        
        // Feature: Run on Page Load
        document.addEventListener('DOMContentLoaded', () => {
            // Display current time in loading message
            document.getElementById('current-timestamp').innerText = new Date().toLocaleString('en-US', {timeZone: 'Indian/Mahe', dateStyle: 'full', timeStyle: 'long'});
            
            // Set current year in footer
            document.getElementById('current-year').innerText = new Date().getFullYear();
            
            // Navigation Toggle Logic
            document.getElementById('hamburger').addEventListener('click', () => {
                document.getElementById('nav-links').classList.toggle('active');
            });

            // Check if user has seen the cookie gate
            if (localStorage.getItem('fs_v11_visited') === 'true') {
                document.getElementById('cookie-gate').style.display = 'none';
            }

            // Supabase Auth Listener (To show Dashboard link)
            supabase.auth.onAuthStateChange((event, session) => {
                const dashboardLink = document.getElementById('nav-dashboard-link');
                if (session) {
                    // User is logged in, show Dashboard link
                    dashboardLink.style.display = 'block';
                } else {
                    // User is logged out, hide Dashboard link
                    dashboardLink.style.display = 'none';
                }
            });

            // Start data loading and page setup
            loadPublicData();
        });
    </script>
</body>
</html>
