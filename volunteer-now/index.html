<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Volunteer Now — FoodShare Seychelles</title>

  <link rel="icon" href="/image/logo.png" type="image/png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>

  <style>
    :root {
      --primary-light:#81C784; --primary-main:#4CAF50; --primary-dark:#388E3C;
      --accent-blue:#2196F3; --accent-orange:#FF9800; --accent-red:#D32F2F;
      --neutral-bg:#F9F9F9; --neutral-card:#FFFFFF; --text-dark:#333333; --text-light:#666666;
      --shadow-subtle:0 10px 28px rgba(0,0,0,0.10);
      --font-serif:'Georgia', serif; --font-sans:'Helvetica Neue', Arial, sans-serif;
      --transition-speed:0.35s;
    }
    * { box-sizing:border-box; margin:0; padding:0; }
    body { font-family:var(--font-sans); color:var(--text-dark); background:var(--neutral-bg); min-height:100vh; display:flex; flex-direction:column; }
    a { text-decoration:none; color:var(--primary-main); }
    a:hover { color:var(--primary-dark); }
    main { flex-grow:1; padding:40px 0; }
    h1,h2,h3 { font-family:var(--font-serif); color:var(--primary-dark); }
    .content-container { max-width:980px; margin:0 auto; padding:0 25px; }

    /* NAVBAR */
    #navbar { display:flex; justify-content:space-between; align-items:center; padding:18px 25px; background-color:var(--neutral-card); box-shadow:0 4px 12px rgba(0,0,0,0.08); position:sticky; top:0; z-index:1000; }
    .logo-container { display:flex; align-items:center; font-size:1.6em; font-weight:bold; color:var(--text-dark); }
    .logo-img { height:40px; margin-right:10px; }
    .nav-links-container { display:flex; gap:22px; align-items:center; flex-wrap:wrap; justify-content:flex-end; }
    .nav-link { font-weight:600; padding:8px 0; position:relative; color:var(--text-dark); }
    .nav-link::after { content:''; position:absolute; width:0; height:2px; bottom:-5px; left:0; background-color:var(--primary-main); transition:width var(--transition-speed); }
    .nav-link:hover::after { width:100%; }
    .cta-button { background-color:var(--primary-main); color:#fff; border-radius:999px; padding:10px 18px; font-weight:800; box-shadow:0 10px 18px rgba(0,0,0,0.10); }
    .cta-button:hover { background-color:var(--primary-dark); }
    .staff-login { opacity:.9; }

    /* FOOTER */
    #main-footer { margin-top:auto; background-color:#222; color:var(--neutral-bg); padding:50px 0 20px; font-size:0.9em; }
    .footer-content { display:flex; justify-content:space-between; flex-wrap:wrap; margin-bottom:30px; max-width:1200px; margin:0 auto 30px; padding:0 25px; gap:18px; }
    .footer-section { width:20%; min-width:180px; margin-bottom:20px; }
    .footer-section h3 { color:var(--primary-light); margin-bottom:14px; font-size:1.1em; border-bottom:1px solid rgba(255,255,255,0.12); padding-bottom:6px; }
    .footer-section a { color:var(--neutral-bg); display:block; padding:3px 0; }
    .footer-section a:hover { color:var(--primary-main); text-decoration:underline; }
    .footer-bottom { text-align:center; padding-top:20px; border-top:1px solid rgba(255,255,255,0.1); color:#aaa; font-size:0.85em; }

    /* Card */
    .panel {
      background:var(--neutral-card);
      border-radius:18px;
      box-shadow:var(--shadow-subtle);
      border:1px solid rgba(56,142,60,0.14);
      overflow:hidden;
      position:relative;
    }
    .panel::before{
      content:"";
      position:absolute; left:0; top:0; right:0; height:7px;
      background:linear-gradient(90deg, var(--primary-dark), var(--primary-main), var(--primary-light));
    }
    .panel-inner{ padding:22px; }
    .head h1{ font-size:2rem; margin-bottom:6px; }
    .sub{ color:var(--text-light); line-height:1.7; }

    form { margin-top:16px; }
    label { display:block; font-weight:900; margin:12px 0 6px; }
    input, select, textarea {
      width:100%;
      padding:12px 12px;
      border:1px solid #d0d5dd;
      border-radius:12px;
      outline:none;
      font-size:1rem;
      background:#fff;
    }
    input:focus, textarea:focus, select:focus{
      border-color: rgba(76,175,80,0.55);
      box-shadow: 0 0 0 4px rgba(76,175,80,0.14);
    }
    textarea { resize: vertical; min-height: 110px; }

    .row { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    @media (max-width: 680px){ .row{ grid-template-columns:1fr; } }

    .chipbox{
      background:rgba(129,199,132,0.14);
      border:1px solid rgba(56,142,60,0.18);
      border-radius:14px;
      padding:12px;
      margin-top:10px;
      color:var(--text-light);
      line-height:1.65;
    }
    .chipbox b{ color:var(--primary-dark); }

    .btn{
      width:100%;
      margin-top:16px;
      border:none;
      border-radius:999px;
      padding:12px 14px;
      background:var(--primary-main);
      color:#fff;
      font-weight:900;
      font-size:1.05rem;
      cursor:pointer;
      box-shadow:0 12px 22px rgba(0,0,0,0.12);
    }
    .btn:hover{ background:var(--primary-dark); }
    .btn:disabled{ opacity:.65; cursor:not-allowed; }

    .msg{
      display:none;
      margin-top:14px;
      padding:12px 14px;
      border-radius:14px;
      font-weight:900;
      line-height:1.55;
    }
    .msg.ok{ background:rgba(129,199,132,0.22); color:var(--primary-dark); border:1px solid rgba(56,142,60,0.18); }
    .msg.err{ background:rgba(211,47,47,0.10); color:var(--accent-red); border:1px solid rgba(211,47,47,0.22); }

    /* Loading */
    .loading {
      position:fixed; inset:0; background:rgba(249,249,249,0.92);
      display:none; align-items:center; justify-content:center; z-index:5000;
    }
    .spinner {
      width:54px; height:54px; border-radius:50%;
      border:6px solid rgba(76,175,80,0.18);
      border-top-color: var(--primary-main);
      animation: spin .9s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg);} }
  </style>

  <script>
    const SUPABASE_URL = 'https://edotvuleaydztulkxehe.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVkb3R2dWxlYXlkenR1bGt4ZWhlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU2MDAyNDYsImV4cCI6MjA4MTE3NjI0Nn0.gDni31MI8twOpNmNcIpj1jGsra75eZ2iLL6gQM0i9lw';

    let supabase;
    function qs(id){ return document.getElementById(id); }
    function setLoading(on){ qs('loading').style.display = on ? 'flex' : 'none'; }

    function showMsg(kind, html){
      const el = qs('msg');
      el.className = 'msg ' + kind;
      el.innerHTML = html;
      el.style.display = 'block';
    }

    function val(id){ return qs(id).value.trim(); }

    async function submitVolunteer(e){
      e.preventDefault();
      qs('msg').style.display = 'none';

      const full_name = val('fullName');
      const email = val('email');
      const phone = val('phone');

      const linkedin_url = val('linkedin');
      const is_resident = qs('resident').value;
      const island = qs('island').value;
      const availability = val('availability');
      const has_transport = qs('transport').value;
      const interest_area = qs('interest').value;
      const motivation = val('motivation');

      if (!linkedin_url.startsWith('http')){
        return showMsg('err', `<i class="fa-solid fa-triangle-exclamation"></i> LinkedIn URL must start with http(s)://`);
      }
      if (!is_resident) return showMsg('err', `<i class="fa-solid fa-triangle-exclamation"></i> Please select residency status.`);
      if (!interest_area) return showMsg('err', `<i class="fa-solid fa-triangle-exclamation"></i> Please select an area of interest.`);

      const btn = qs('submitBtn');
      btn.disabled = true;
      btn.textContent = 'Submitting...';

      const payload = {
        full_name,
        email,
        phone,
        linkedin_url,
        is_resident: (is_resident === 'Yes'),
        island: island || null,
        weekly_availability: availability || null,
        has_transport: has_transport ? (has_transport === 'Yes') : null,
        interest_area,
        motivation,
        status: 'New'
      };

      const { error } = await supabase.from('volunteer_applications').insert([payload]);

      if (error){
        console.error(error);
        btn.disabled = false;
        btn.textContent = 'Submit Application';
        return showMsg('err', `<i class="fa-solid fa-circle-xmark"></i> Submission failed: ${error.message}`);
      }

      showMsg('ok', `<i class="fa-solid fa-circle-check"></i> Thank you, <b>${full_name}</b>. Your application has been submitted successfully. We will review it soon.`);
      qs('volunteerForm').reset();
      btn.style.display = 'none';
    }

    document.addEventListener('DOMContentLoaded', async () => {
      supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
      qs('volunteerForm').addEventListener('submit', submitVolunteer);
    });
  </script>
</head>

<body>
  <div id="loading" class="loading"><div class="spinner"></div></div>

  <header id="navbar">
    <a href="/" class="logo-container">
      <img src="/image/logo.png" alt="FoodShare Seychelles Logo" class="logo-img">
      FoodShare <span style="color: var(--primary-main);">Seychelles</span>
    </a>

    <nav class="nav-links-container">
      <a href="/available-food/" class="nav-link">Find Food</a>
      <a href="/donate-now/" class="nav-link">Donate</a>
      <a href="/volunteer-now/" class="nav-link">Volunteer</a>
      <a href="/our-impact/" class="nav-link">Impact</a>
      <a href="/about/" class="nav-link">About Us</a>
      <a href="/donate-now/" class="cta-button">DONATE NOW</a>
      <a href="/staff-login/" class="staff-login nav-link">Staff Login</a>
    </nav>
  </header>

  <main>
    <div class="content-container">
      <section class="panel">
        <div class="panel-inner">
          <div class="head">
            <h1><i class="fa-solid fa-users"></i> Volunteer Application</h1>
            <div class="sub">
              Join FoodShare Seychelles and help us reduce food waste while supporting communities across the islands.
            </div>
            <div class="chipbox">
              <b>LinkedIn is required</b> for internal staff coordination. If you do not have an account, please create one and paste your profile link below.
            </div>
          </div>

          <div id="msg" class="msg"></div>

          <form id="volunteerForm">
            <h2 style="font-size:1.25rem; margin-top:12px;">Contact Details</h2>

            <label for="fullName">Full Name *</label>
            <input id="fullName" type="text" required placeholder="First & Last name" />

            <div class="row">
              <div>
                <label for="email">Email Address *</label>
                <input id="email" type="email" required placeholder="you@example.com" />
              </div>
              <div>
                <label for="phone">Phone Number</label>
                <input id="phone" type="tel" placeholder="e.g., 251-0000" />
              </div>
            </div>

            <label for="linkedin">LinkedIn Profile URL *</label>
            <input id="linkedin" type="url" required placeholder="https://www.linkedin.com/in/yourname" />

            <h2 style="font-size:1.25rem; margin-top:18px;">Residency & Availability</h2>

            <label for="resident">Are you a current resident of the Republic of Seychelles? *</label>
            <select id="resident" required>
              <option value="">-- Select --</option>
              <option value="Yes">Yes</option>
              <option value="No">No (I can volunteer remotely)</option>
            </select>

            <label for="island">If you are in Seychelles, which island do you live on?</label>
            <select id="island">
              <option value="">-- Select (Optional) --</option>
              <option value="Mahe">Mahé</option>
              <option value="Praslin">Praslin</option>
              <option value="La Digue">La Digue</option>
              <option value="Other">Other</option>
            </select>

            <label for="availability">Weekly availability you can dedicate</label>
            <input id="availability" type="text" placeholder="e.g., 5 hours/week; evenings; weekends" />

            <label for="transport">If you are in Seychelles, do you have access to personal transport?</label>
            <select id="transport">
              <option value="">-- Select (Optional) --</option>
              <option value="Yes">Yes</option>
              <option value="No">No</option>
            </select>

            <h2 style="font-size:1.25rem; margin-top:18px;">Interests</h2>

            <label for="interest">What area are you interested in assisting with? *</label>
            <select id="interest" required>
              <option value="">-- Select --</option>
              <option value="Admin/Coordination">Admin / Coordination</option>
              <option value="Support">Support</option>
              <option value="Ambassadorship">Ambassadorship</option>
              <option value="Social Media">Social Media</option>
              <option value="Driver/Logistics">Driver / Logistics</option>
              <option value="Other">Other</option>
            </select>

            <label for="motivation">Why do you want to volunteer at FoodShare Seychelles?</label>
            <textarea id="motivation" placeholder="Tell us why you want to join and what skills you can contribute."></textarea>

            <button id="submitBtn" class="btn" type="submit">
              <i class="fa-solid fa-paper-plane"></i> Submit Application
            </button>
          </form>
        </div>
      </section>
    </div>
  </main>

  <footer id="main-footer">
    <div class="content-container footer-content">
      <div class="footer-section"><h3>Quick Links</h3><ul><li><a href="/available-food/">Find Food</a></li><li><a href="/donate-now/">Donate</a></li><li><a href="/volunteer-now/">Volunteer</a></li><li><a href="/our-impact/">Impact</a></li><li><a href="/contact-general/">General Contact</a></li></ul></div>
      <div class="footer-section"><h3>Learn More</h3><ul><li><a href="/about/">About FoodShare</a></li><li><a href="/our-partners/">Our Partners</a></li><li><a href="/learn/safety/">Food Safety Protocol</a></li><li><a href="/learn/faq/">General FAQ</a></li></ul></div>
      <div class="footer-section"><h3>Support & Legal</h3><ul><li><a href="/privacy-policy/">Privacy Policy</a></li><li><a href="/terms-of-use/">Terms of Use</a></li><li><a href="/sitemap/">Site Structure</a></li><li><a href="/staff-login/">Staff Login</a></li></ul></div>
      <div class="footer-section">
        <h3>Get In Touch</h3>
        <p>Email: <a href="mailto:admin@foodshare-seychelles.online" style="color: var(--primary-main);">admin@foodshare-seychelles.online</a></p>
        <p>Follow us on <a href="/social/" style="color: var(--primary-main); display:inline;">Social Media</a></p>
      </div>
    </div>
    <div class="footer-bottom">&copy; 2025 Foodshare Seychelles. All Rights Reserved.</div>
  </footer>
</body>
</html>
