<script>
        // ... (Same CONSTS and Utility functions as claims.html) ...

        async function checkAccessAndRedirect() {
            // ... (Same Auth/Access check as claims.html) ...
            fetchInventory(); // CHANGE: Fetch Inventory
        }
        
        // --- INVENTORY MODULE (Table: available_inventory) ---
        async function fetchInventory() {
            const inventoryBody = document.getElementById('inventoryTableBody');
            showLoading('inventoryTableBody', 6);

            const { data: inventory, error } = await supabase
                .from('available_inventory')
                .select(`id, item_name, unit_of_measure, current_stock_count, min_stock_level, updated_at`)
                .order('item_name', { ascending: true });

            if (error) { showLoading('inventoryTableBody', 6, `Error: ${error.message}`); return; }
            if (inventory.length === 0) { showLoading('inventoryTableBody', 6, `No inventory items found.`); return; }

            inventoryBody.innerHTML = inventory.map(i => `
                <tr class="${i.current_stock_count <= i.min_stock_level ? 'low-stock' : ''}">
                    <td>${i.item_name}</td>
                    <td>${i.unit_of_measure}</td>
                    <td>${i.current_stock_count}</td>
                    <td>${i.min_stock_level}</td>
                    <td>${formatDate(i.updated_at)}</td>
                    <td>
                        <button class="action-button" onclick="openEditModal('${i.id}')">Edit Stock</button>
                        <button class="action-button reject" onclick="deleteItem('${i.id}')">Delete</button>
                    </td>
                </tr>
            `).join('');
        }
        
        // Placeholder functions for Add/Edit/Delete
        function openAddModal() { alert('Display Add New Item Form.'); }
        function openEditModal(id) { alert('Display Edit Form for Item ID: ' + id); }
        function deleteItem(id) { 
             if (confirm('Are you sure you want to delete this inventory item?')) {
                 // In a real app, you would call Supabase delete here
                 alert('Item ID ' + id + ' deleted (placeholder).');
                 fetchInventory();
             }
        }


        document.addEventListener('DOMContentLoaded', checkAccessAndRedirect);
    </script>
    <style>
        /* ... (Include base styles) ... */
        .low-stock { background-color: #ffe0b2; } /* Light orange for low stock rows */
        .low-stock td { border-left: 3px solid #FF9800; }
        .add-button { background-color: #4CAF50; color: white; padding: 10px 15px; border-radius: 5px; cursor: pointer; border: none; font-size: 1em; margin-bottom: 20px; }
        .add-button:hover { background-color: #388E3C; }
    </style>
</head>
<body>
    <nav id="adminSidebar">
        <h2><i class="fas fa-database"></i> Management</h2>
        <a href="/admin/inventory-manage.html" class="sidebar-link active"><i class="fas fa-boxes"></i> Inventory</a>
        </nav>
    
    <div id="mainContent">
        <header id="topbar">
            <h1>Inventory Stock Management</h1>
            </header>

        <div class="dashboard-body">
            <div class="content-card">
                <h2>Current Available Stock (Table: `available_inventory`)</h2>
                
                <button class="add-button" onclick="openAddModal()">
                    <i class="fas fa-plus-circle"></i> Add New Item
                </button>
                
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Item Name</th>
                            <th>Unit of Measure</th>
                            <th>Current Stock</th>
                            <th>Min Stock Level</th>
                            <th>Last Updated</th>
                            <th style="width: 200px;">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="inventoryTableBody">
                        </tbody>
                </table>
            </div>
        </div>
    </div>
</body>
</html>
